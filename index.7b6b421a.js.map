{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","js/main.js","node_modules/nanoid/index.browser.js","js/components.js","node_modules/@swc/helpers/src/_define_property.mjs","node_modules/attodom/index.js","node_modules/attodom/el.js","node_modules/attodom/src/events.js","node_modules/attodom/svg.js","js/utilities.js","node_modules/@swc/helpers/src/_object_spread.mjs","node_modules/@swc/helpers/src/_object_spread_props.mjs","node_modules/file-saver/src/FileSaver.js","node_modules/@parcel/runtime-js/lib/runtime-bb981c9c589bb95a.js","node_modules/@parcel/runtime-js/lib/helpers/browser/import-polyfill.js","node_modules/@parcel/runtime-js/lib/helpers/cacheLoader.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/flyd/lib/index.js","node_modules/ramda/src/curryN.js","node_modules/ramda/src/internal/_arity.js","node_modules/ramda/src/internal/_curry1.js","node_modules/ramda/src/internal/_isPlaceholder.js","node_modules/ramda/src/internal/_curry2.js","node_modules/ramda/src/internal/_curryN.js","node_modules/flyd/module/droprepeats/index.js","node_modules/@parcel/runtime-js/lib/bundles/runtime-5aca51176811bf99.js","node_modules/ngraph.graph/index.js","node_modules/ngraph.events/index.js","node_modules/@parcel/runtime-js/lib/runtime-0ec17db46650058e.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { nanoid } from 'nanoid'\nconst createGraph = require('ngraph.graph')\nimport { ClosingDetails, TabPanel, TabGroup, TagList, ModalOverlay, DialogPrompt, Toast,\n          } from './components.js'\nimport { err, zip, equal, take, arrayUnique, filterObjectByKey, substituteText, Tree, bfsTree,\n          cloneTemplateFrom, parseDoc, exportObject, encryptMessage } from './utilities.js'\n\nimport PUBLIC_KEY from 'bundle-text:../pubkey.asc'\nconst OBFUSCATED_FORMSPREE_ENDPOINT = \"aHR0cHM6Ly9mb3Jtc3ByZWUuaW8vZi9tYmp3cGRwdw==\"\nconst DATA_URL = \"https://devious-digitizer-data.netlify.app/\"\n\nconst cloneTemplate = cloneTemplateFrom(document)\n\ncustomElements.define('closing-details', ClosingDetails, {extends: 'details'})\ncustomElements.define('tab-panel', TabPanel)\ncustomElements.define('tab-group', TabGroup)\ncustomElements.define('tag-list', TagList, {extends: 'ul'})\ncustomElements.define('modal-overlay', ModalOverlay)\ncustomElements.define('dialog-prompt', DialogPrompt)\ncustomElements.define('toast-box', Toast)\n\n//document.getElementById('landing_settings_link').addEventListener(\n//    'click',\n//    _ => document.body.append(settings(state.history[0].passage.title, routeTree))\n//)\ndocument.getElementById('landing_feedback_link').addEventListener(\n    'click',\n    _ => document.body.append(feedback(null, null, null, navigator.userAgent))\n)\ndocument.getElementById('landing_privacy_link').addEventListener(\n    'click',\n    _ => document.body.append(privacy())\n)\n\ndocument.getElementById('file_select').addEventListener('change', e => switchToStory(e.target.files[0]))\n\nconst dragDropOverlay = document.getElementById('drag_drop_overlay')\ndocument.body.addEventListener('dragenter', e => {\n    // TODO make nice drag drop overlay\n    // new Overlay(null, ['Drag-and-drop icon goes here'])._overlay.open(document.body)\n    e.preventDefault()\n})\ndocument.body.addEventListener('dragover', e => e.preventDefault())\ndocument.body.addEventListener('dragleave', _ => {\n    // document.querySelector('.drag_drop_overlay').close()\n})\ndocument.body.addEventListener('drop', e => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (e.dataTransfer.files) switchToStory(e.dataTransfer.files[0])\n})\n\n\n/// TEMPLATES ///\n\n// FIX fadeTime is unimplemented\nfunction toast(text, lingerTime = 3, fadeTime = 1) {\n    const toast = document.createElement('toast-box')\n    toast.setAttribute('text', text)\n    toast.setAttribute('linger-time', lingerTime)\n    //toast.setAttribute('fade-time', fadeTime)\n    return toast\n}\n\n// modal prompt: \"file does not appear to be a Devious World or Devious Mundanity file\".\n//      options: cancel (return false), try anyway (return true), clicking away is same as cancel\nasync function askToConfirm(filename) {\n    return new Promise((res, rej) => {\n        const respond = response => e => {\n            if (e.target == e.currentTarget) {\n                e.target.dispatchEvent(ModalOverlay.closeRequest)\n                res(response)\n            }\n        }\n\n        const template = cloneTemplate('confirmation_template')\n\n        const prompt = template.querySelector('.confirm_prompt')\n        prompt.textContent = substituteText(prompt.textContent, {filename})\n        template.querySelector('modal-overlay').addEventListener('click', respond(false))\n        template.querySelector('.cancel').addEventListener('click', respond(false))\n        template.querySelector('.try_anyway').addEventListener('click', respond(true))\n\n        document.body.append(template)\n    })\n}\n\nfunction sidebarMenu(tale, state, routeTree, userAgent) {\n    const template = cloneTemplate('sidebar_menu_template')\n\n    template.querySelector('.settings_link').addEventListener(\n        'click',\n        _ => document.body.append(settings(state.history[0].passage.title, routeTree))\n    )\n\n    template.querySelector('.feedback_link').addEventListener(\n        'click',\n        _ => document.body.append(feedback(tale, state, routeTree, userAgent))\n    )\n\n    template.querySelector('.privacy_link').addEventListener(\n        'click',\n        _ => document.body.append(privacy())\n    )\n\n    return template\n}\n\nfunction settings(curr, routeTree) {\n    const template = cloneTemplate('settings_template')\n\n    const close = e => {\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\n    }\n    template.querySelector('modal-overlay').addEventListener('click', close)\n    template.querySelector('.close_settings').addEventListener('click', close)\n\n    const tagEditor = template.querySelector('.tag_editor')\n    tagEditor.value = gatherTags(curr, routeTree).join(' ')\n\n    template.querySelector('.save_tags').addEventListener('click', _ => {\n        const psg = routeTree.get(curr)\n        if (psg) psg.modifiedTags = tagEditor.value.split(' ')\n        document.body.append(toast(\"tags saved!\", 2))\n    })\n\n    // TODO? Add \"revert tags\" button\n\n    template.querySelector('.export_metadata').addEventListener('click', _ =>\n        exportObject(extractMetadata(routeTree), 'metadata.json'))\n\n    return template\n}\n\n// Caches form to make filled-in info persistent\nlet feedbackForm\nfunction buildFeedback() {\n    const template = cloneTemplate('feedback_template')\n\n    const close = e => {\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\n    }\n    template.querySelector('modal-overlay').addEventListener('click', close)\n    template.querySelector('.close_feedback').addEventListener('click', close)\n    \n    // give a visual indicator that debug_info is being disabled\n    const debugInfo = template.querySelector('.debug_info')\n    const includeDebugInfo = template.querySelector('.include_debug_info')\n    includeDebugInfo.addEventListener('change', _ => {debugInfo.disabled = !includeDebugInfo.checked})\n    \n    const submit = type => e => {\n        e.preventDefault()\n        \n        const feedbackID = `${type}-${nanoid(6)}`\n        \n        // disable debug info when requested so it is not included in BUG feedback messages\n        debugInfo.disabled = !includeDebugInfo.checked\n        \n        const data = new FormData(e.target)\n        data.append('id', feedbackID)\n        \n        const subject = `Devious Digitizer Feedback ${feedbackID}`\n        const body = [...data.entries()].map(([k, v]) => `${k}: ${v}`).join('\\n\\n')\n        \n        document.body.append(feedbackPreview(subject, body, e.target))\n    }\n    template.querySelector('.bug_report').addEventListener('submit', submit('BUG'))\n    template.querySelector('.feature_request').addEventListener('submit', submit('REQ'))\n    template.querySelector('.help_request').addEventListener('submit', submit('HLP'))\n    template.querySelector('.submit_tags').addEventListener('submit', submit('TAG'))\n\n    return template\n}\n\nfunction feedback(tale, state, routeTree, userAgent) {\n    feedbackForm ??= buildFeedback().firstChild\n    \n    feedbackForm.querySelector('.debug_info').textContent = gatherDebugInfo(tale, state, userAgent)\n    \n    if (routeTree !== null) {\n        feedbackForm.querySelector('.tag_changes').textContent = gatherTagChanges(routeTree)\n    }\n    \n    return feedbackForm\n}\n\nfunction feedbackPreview(subject, body, form) {\n    const template = cloneTemplate('feedback_preview_template')\n    \n    template.querySelector('.subject').textContent = subject\n    template.querySelector('.body').textContent = body\n    \n    const close = e => {\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\n    }\n    template.querySelector('modal-overlay').addEventListener('click', close)\n    template.querySelector('.cancel').addEventListener('click', close)\n    \n    template.querySelector('.submit').addEventListener('click', e => {\n        encryptMessage(PUBLIC_KEY, body)\n            .then(encryptedBody => sendFormspree(subject, encryptedBody))\n            .then(_ => {\n                form.reset()\n                e.target.dispatchEvent(ModalOverlay.closeRequest)\n                document.body.append(toast(\"feedback sent successfully ^_^\"))\n            })\n            .catch(msg => alert(`something went wrong:\\n${msg}`))\n    })\n    \n    return template\n}\n\nfunction privacy() {\n    const template = cloneTemplate('privacy_template')\n    \n    const close = e => {\n        if (e.target == e.currentTarget) e.target.dispatchEvent(ModalOverlay.closeRequest)\n    }\n    template.querySelector('modal-overlay').addEventListener('click', close)\n    template.querySelector('.close_privacy').addEventListener('click', close)\n    \n    return template\n}\n\nfunction retrospective(curr, routeTree, tale) {\n    const template = cloneTemplate('retrospective_template')\n\n    template.querySelector('.choice--current').innerText = routeTree.get(curr)?.link?.text ?? ''\n\n    template.querySelector('.past_passages').ontoggle = (e) => {\n        if (e.target.open) {\n            e.target.ontoggle = null\n            e.target.prepend(\n                ...routeTree\n                .getAncestryOf(curr)\n                .map(title => pastPassage(routeTree.get(title)?.link?.text ?? 'Start', tale.get(title))))\n        }\n    }\n\n    return template\n}\n\nfunction pastPassage(choice, psg) {\n    const template = cloneTemplate('past_passage_template')\n\n    template.querySelector('.choice--past').innerText = choice\n    template.querySelector('.past_passage__text').append(psg.render().querySelector('.body.content'))\n\n    return template\n}\n\nfunction passageTagViewer(tags) {\n    const tagViewer = cloneTemplate('tag_viewer_template')\n    tagViewer.querySelector('.tag_list').tags(tags)\n\n    return tagViewer\n}\n\nfunction inlineTagViewer(passageTags, routeTags) {\n    const tagViewer = cloneTemplate('inline_tag_viewer_template')\n    tagViewer.querySelector('.tag_list--passage').tags(passageTags)\n    tagViewer.querySelector('.tag_list--route').tags(routeTags)\n\n    return tagViewer\n}\n\n\n/// Devious Digitizer ///\n\nfunction gatherTags(title, routeTree, recursive = false) {\n    if (!recursive) return routeTree.get(title)?.modifiedTags ?? routeTree.get(title)?.tags ?? []\n    return arrayUnique(\n        Tree.cata(\n            routeTree,\n            title,\n            node => (node.modifiedTags ?? node.tags ?? []).concat(...node.children)\n        )\n    )\n        // arrayUnique([...(node.tags ?? []), ...node.children.flatMap(child => gatherTags(child, routeTree, true))])\n}\n\nasync function sendFormspree(subject, body) {\n    const data = new FormData()\n    data.append('subject', subject)\n    data.append('body', body)\n    \n    const response = await fetch(atob(OBFUSCATED_FORMSPREE_ENDPOINT), {\n        method: 'POST',\n        body: data,\n        headers: {\n            'Accept': 'application/json'\n        }\n    })\n    if (!response.ok) {\n        const errMsg = \"There was a problem while trying to send your feedback. Please try again in a moment.\"\n        const data = await response.json()\n        if (Object.hasOwn(data, 'errors')) {\n            throw new Error(errMsg + data[\"errors\"].map(error => error[\"message\"]).join(\", \"))\n        } else {\n            throw new Error(errMsg)\n        }\n    }\n}\n\nfunction gatherDebugInfo(tale, state, userAgent) {\n    return JSON.stringify({\n        userAgent,\n        deviousVersion: tale?.title,\n        currentPassage: state ? state.history[0].passage.title : null,\n        // TODO version of Devious Digitizer\n        // TODO version of tags\n    }, null, 2)\n}\n\nfunction gatherTagChanges(routeTree) {\n    return JSON.stringify(\n        Object.fromEntries(\n            [...routeTree]\n            .filter(([k,v]) => v.hasOwnProperty('modifiedTags'))\n            .map(([k,v]) => [k, v.modifiedTags])\n        ),\n        null,\n        2,\n    )\n}\n\nasync function switchToStory(file) {\n    // TODO? clear previous twine elements to allow for loading more than one story\n    const storyText = await file.text()\n    const storyDoc = parseDoc(storyText)\n\n    // is document one of DW or DM?\n    if (!storyDoc.querySelector('#storeArea > [tiddler = \"CharGenMain\"]')) {\n        const confirmContinue = await askToConfirm(file.name)\n        if (!confirmContinue) return;\n    }\n\n    hideLanding()\n    loadDocIntoDom(storyDoc)\n    await injectDigitizerFeatures()\n}\n\nfunction hideLanding() {\n    document.querySelector('.digitizer-landing').classList.add('digitizer-landing--inactive')\n}\n\nfunction loadDocIntoDom(doc) {\n    document.head.insertAdjacentHTML(\"beforeend\", doc.head.innerHTML)\n    document.body.insertAdjacentHTML(\"beforeend\", doc.body.innerHTML)\n\n    // prevent engine script from running multiple times?\n    document.head.querySelectorAll('script').forEach(s => eval(s.text))\n    dispatchEvent(new Event('load'))\n}\n\nasync function injectDigitizerFeatures () {\n    const store = document.getElementById('storeArea')\n    const passages = document.getElementById('passages')\n    const tale = window.tale\n    const state = window.state\n\n    // determine whether this is DW or DM by checking which character starts are present\n    const DWChars = ['allstarstart', 'youngpunkstart', 'quietonestart', 'runawaystart', 'GwynStart', 'BuddyStart', 'AustinStart', 'DavidStart', 'JackStart', 'MikeStart', 'ThaddeusStart', 'SweetKidStart', 'MeanGirlStart', 'GirlGamerStart', 'SelfSufficientStart', 'CallistaStart', 'BritStart', 'WilmaStart', 'HollyStart', 'CelesteStart', 'HelenStart', 'MareiStart', 'IreneStart']\n    const DMChars = ['CaliburnStart', 'DefianceStart', 'EdithStart', 'FionaStart', 'IrethStart', 'KaiStart', 'KiaraStart', 'KonkoStart', 'LeoStart', 'MaxiaStart', 'NicholasStart', 'SimoneStart', 'SiphaStart', 'ValerieStart', 'YamiStart']\n    const metadataName = DWChars.some(tale.has, tale) ? 'DW_metadata.json' :\n                         DMChars.some(tale.has, tale) ? 'DM_metadata.json' :\n                                                    err('Story is neither Worldly nor Mundane')\n    // fetch the relevant metadata file from the server\n    const metadata = await fetch(DATA_URL + metadataName).then(res => res.json())\n\n    // build a graph from passages' links\n    const passageGraph = buildPassageGraph(store)\n\n    // render the graph into a tree of story routes by following links starting at CharGenMain and dropping cycles\n    const routeTree = Tree.fromGraphBfs(\n        (addChild, currentChild) => passageGraph.forEachLinkedNode(\n            currentChild,\n            (child, link) => addChild(child.id, Object.assign({link: link.data}, child.data)),\n            true // only traverse outbound links\n        ),\n        'CharGenMain'\n    )\n    // decorate routeTree with tags and other metadata\n    routeTree.forEach((value, key) => routeTree.set(key, Object.assign(value, metadata[key])))\n\n    // dispatch events when switching passages\n    window.state.display = function (title, source, type, callback) {\n        passages.dispatchEvent(new CustomEvent(\n            'before_tale_display',\n            {detail: {title, source, type, callback}}))\n        Object.getPrototypeOf(window.state).display.apply(this, [title, source, type, callback])\n        passages.dispatchEvent(new CustomEvent(\n            'after_tale_display',\n            {detail: {title, source, type, callback}}))\n    }\n\n    // (Twine conveniently cleans out the previous passage's viewers while removing the previous passage)\n    passages.addEventListener(\n        'after_tale_display',\n        (e) => {\n            const curr = e.detail.title\n            // if we have metadata for current passage\n            if (routeTree.has(curr)) {\n                // above passage, add a viewer for current passage's tags and\n                passages.prepend(passageTagViewer(gatherTags(curr, routeTree)))\n                // if the current passage has preceding passages\n                if (routeTree.get(curr).parent)\n                    // a retrospective of preceding passages\n                    passages.prepend(retrospective(curr, routeTree, tale))\n            }\n        }\n    )\n\n    // add target passage name to passage links to assist in adding the inline tag viewers\n    passages.addEventListener(\n        'after_tale_display',\n        (e) => annotateLinksWithTheirTarget(e.detail.title, tale, passages.querySelector('.passage.transition-in > .body'))\n    )\n\n    // add inline tag viewer elements to new passages\n    passages.addEventListener(\n        'after_tale_display',\n        (e) => addLinkTagLists(passages.querySelector('.passage.transition-in > .body'), routeTree)\n    )\n\n    // Add sidebar links //\n    document.getElementById('sidebar').append(sidebarMenu(tale, state, routeTree, navigator.userAgent))\n}\n\nconst getLinks = body =>\n    Array.from(body.matchAll(/\\[\\[(?:([^|]+)\\|)?([^\\]]+)\\]\\]/g)).map(([_, text,  target]) => ({ text, target }))\n\n// TODO? rewrite using tale instead of storeArea\nfunction buildPassageGraph(storeArea) {\n    const g = createGraph()\n\n    const titles = new Set(Array.from(storeArea.children).map((el) => el.getAttribute('tiddler')))\n\n    for (const passage of storeArea.children) {\n        const title = passage.getAttribute('tiddler')\n\n        for (const { text, target } of getLinks(passage.innerText)) {\n            // only include links to passages that exist\n            if (titles.has(target)) {\n                // create a link between the current and target passages, creating a node for the\n                //   target passage if one does not yet exist, and annotating the link with its text\n                g.addLink(title, target, { text })\n            }\n        }\n    }\n\n    return g\n}\n\nfunction annotateLinksWithTheirTarget(title, tale, passageBody) {\n    const linkTargets = getLinks(tale.get(title).text).map(({target}) => target)\n    const links = Array.from(passageBody.querySelectorAll('a'))\n\n    for (const [link, target] of take(100, zip([links, linkTargets]))) {\n        link.setAttribute('data-target', target)\n    }\n}\n\nfunction addLinkTagLists(passageBody, routeTree) {\n    passageBody\n        .querySelectorAll('a[data-target]')\n        .forEach((link) => {\n            const title = link.getAttribute('data-target') // NOTE depends on annotateLinksWithTheirTarget\n            // if target passage exists\n            if (routeTree.has(title)) {\n                link.before( inlineTagViewer(\n                    gatherTags(title, routeTree, false),\n                    gatherTags(title, routeTree, true)\n                ))\n            }\n        })\n}\n\nfunction extractMetadata(routeTree) {\n    const include = new Set(['tags', 'modifiedTags'])\n    const strip = value => filterObjectByKey(value, key => include.has(key))\n\n    return routeTree.toObject(([key, value]) => [key, strip(value)])\n}\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","// import * as petit from 'petit-dom'\n// const el = petit.h\n// const render = (parent, child, opts) => petit.render(child, parent, opts)\n\n// import { el, mount } from 'redom'\n\nimport { el } from 'attodom'\nimport { nanoid } from 'nanoid'\nimport { pipe, setClass, sleep } from './utilities.js'\n\nimport flyd from 'flyd'\nimport { dropRepeats } from 'flyd/module/droprepeats'\nconst { stream } = flyd\nconst combine = (streams, fn) => flyd.combine(fn, streams)\nconst update = (s, fn) => s(fn(s()))\n//const sideEffect = flyd.curryN(2, (fn, s) => flyd.map(x => {fn(x); return x;}, s))\n\n\nconst updateAttribute = (srm, attr, obj) => pipe(\n    srm,\n    dropRepeats,\n    flyd.on(x => obj.getAttribute(attr) === x ? null : obj.setAttribute(attr, x))\n)\n\n\n//// Web Components ////\n\nexport class ClosingDetails extends HTMLDetailsElement {\n    constructor() {\n        super()\n\n        this._closeIfUnfocused = (e) => {\n            if (!this.contains(document.elementFromPoint(e.clientX, e.clientY))) {\n                this.open = false\n            }\n        }\n    }\n\n    connectedCallback() {\n        document.body.addEventListener('mousedown', this._closeIfUnfocused)\n    }\n\n    disconnectedCallback () {\n        document.body.removeEventListener('mousedown', this._closeIfUnfocused)\n    }\n}\n\n// TODO respond to `disabled` attribute\nexport class TabPanel extends HTMLElement {\n    constructor() {\n        super()\n        this.attachShadow({mode: 'open'})\n        this.shadowRoot.append(\n            el('style', null, ':host {display: none;} :host(.active) {display: block;}'),\n            el('div', {role: 'tabpanel'}, el('slot'))\n        )\n    }\n\n    connectedCallback() {\n        this.title(this.getAttribute('title') ?? '')\n        this.group(this.parentElement instanceof TabGroup ? this.parentElement : null)\n        this.id = this.id || nanoid(10)\n    }\n\n    static get observedAttributes() { return ['id', 'title']; }\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (name === 'id') { this.idChanged(null) }\n        else if (name === 'title') { this.title(newVal) }\n    }\n\n    idChanged = stream(null)\n    title = stream()\n    _onTitleChanged = updateAttribute(this.title, 'title', this)\n    group = stream()\n    active = combine([this.group.chain(g => g?.active), this.idChanged], (gActive, _) => {\n        const active = gActive() === this.id\n        setClass(this, 'active', active)\n        return active\n    })\n}\n\n// TODO respond to `disabled` attribute on TabPanels\nexport class TabGroup extends HTMLElement {\n    constructor() {\n        super()\n        this.attachShadow({mode: 'open'})\n        this.shadowRoot.append(\n            el('style', null, `\n                #tabgroup { display: flex; flex-flow: var(--tabs-position, column) nowrap; gap: var(--tablist-gap, 0); }\n                #tablist { display: flex; flex-flow: var(--tabs-flow, row wrap); align-items: var(--tab-align); margin: 0;\n                    padding: 0; gap: var(--tabs-gap, .5em); }\n                .tab { display: block; background: var(--tab-background); cursor: var(--tab-cursor); padding: var(--tab-padding);\n                    border: var(--tab-border); border-style: var(--tab-border-style); border-color: var(--tab-border-color);\n                    border-width: var(--tab-border-width); border-radius: var(--tab-border-radius); }\n                .tab.active { background: var(--tab-active-background); border: var(--tab-active-border);\n                    border-style: var(--tab-active-border-style); border-color: var(--tab-active-border-color);\n                    border-width: var(--tab-active-border-width); border-radius: var(--tab-active-border-radius); }`\n            ),\n            el('div', {part: 'tabgroup', role: 'wrapper', id: 'tabgroup'}, [\n                el('slot'),\n                el('menu', {part: 'tablist', role: 'tablist', id: 'tablist'})]\n            )\n        )\n        this.shadowRoot\n            .querySelector('slot')\n            .addEventListener(\n                'slotchange',\n                e => this.tabs(e.target.assignedElements().filter(x => x instanceof TabPanel))\n            )\n    }\n\n    static get observedAttributes() { return ['active']; }\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (name === 'active') { this.active(newVal) }\n    }\n\n    defaultTabTitle = ''\n    tabs = stream()\n    active = stream(null)\n    _onActiveChanged = updateAttribute(this.active, 'active', this)\n\n    renderTabList = combine([this.tabs, this.active], (tabs, active) => {\n        // if `active` isn't a valid reference to a child tab-panel, default to the first tab-panel\n        if (!tabs().some(el => el.id === active())) {\n            this.active(tabs()[0]?.id)\n            return\n        }\n        this.shadowRoot.getElementById('tablist').replaceChildren(\n            ...tabs().map(tab => el('li', {\n                    class: ('tab' + ((active() === tab.id) ? ' active' : '')),\n                    onclick: () => this.active(tab.id),\n                    'aria-controls': tab.id,\n                    role: 'tab',\n                },\n                tab.title() || this.defaultTabTitle\n            ))\n        )\n    })\n}\n\nexport class TagList extends HTMLUListElement {\n    connectedCallback() {\n        this.connected(true)\n    }\n\n    connected = stream()\n\n    tags = stream([])\n\n    render = combine([this.tags, this.connected], (tags) =>\n        // TODO convert to using attodom.list?\n        this.replaceChildren(\n            ...tags().sort().map(tag => el('li', {class: 'tag_list__tag'}, tag))\n        )\n    )\n}\n\nexport class ModalOverlay extends HTMLElement {\n    constructor() {\n        super()\n        this.attachShadow({mode: 'open'})\n        this.shadowRoot.append(\n            el('style', null, `\n                #overlay {\n                    display: var(--overlay-display, flex); flex-flow: column nowrap; justify-content: safe center;\n                    align-items: center;\n\n                    position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%;\n                    overflow: auto;\n\n                    background-color: var(--overlay-color, rgba(0,0,0,0.4));\n                }`\n            ),\n            el('div', {id: 'overlay'}, [el('slot')]),\n        )\n        this.addEventListener('request_overlay_close', e => {e.stopPropagation(); this.close()})\n    }\n    \n    static closeRequest = new Event('request_overlay_close', {bubbles:true, cancelable:true})\n\n    open(parent) {\n        parent.appendChild(this._overlay)\n    }\n    \n    close() { this.remove() }\n}\n\nexport class DialogPrompt extends HTMLElement {\n    constructor() {\n        super()\n        this.attachShadow({mode: 'open'})\n        this.shadowRoot.append(\n            el('style', null, `\n                #dialog {\n                    background-color: var(--dialog-color, grey); padding: var(--dialog-padding, 2em);\n                    border: var(--dialog-border); border-radius: var(--dialog-border-radius);\n                }\n\n                #buttons {\n                    display: flex; flex-flow: row wrap; justify-content: space-around;\n                    align-items: center; align-content: space-around; border: none;\n                }`\n            ),\n            el('form', {id: 'dialog', onsubmit: _ => false}, [\n                el('slot', {name: 'prompt'}),\n                el('fieldset', {id: 'buttons'}, [el('slot', {name: 'buttons'})])\n            ]),\n        )\n    }\n}\n\nexport class Toast extends HTMLElement {\n    constructor() {\n        super()\n        this.attachShadow({mode: 'open'})\n        this.shadowRoot.append(\n            el('style', null, `\n                @keyframes fadeOut {\n                    from {opacity: 1;}\n                    to {opacity: 0;}\n                }\n                \n                #toast {\n                    background-color: var(--toast-color, grey); padding: var(--toast-padding, 2em);\n                    border: var(--toast-border); border-radius: var(--toast-border-radius);\n                    position: fixed; z-index: 1; left: 50%; bottom: 25%; transform: -50%;\n                }\n                \n                #toast.fade {\n                    animation: fadeOut 1s ease-in;\n                }` // TODO make fade out time customizable\n            ),\n            el('p', {id:'toast'}),\n        )\n        \n        this.shadowRoot.getElementById('toast').addEventListener(\n            'animationend',\n            e => {if (e.animationName === 'fadeOut') this.remove()}\n        )\n    }\n    \n    connectedCallback() {\n        const toast = this.shadowRoot.getElementById('toast')\n        toast.textContent = this.getAttribute('text')\n        sleep(Number(this.getAttribute('linger-time')) * 1000)\n            .then(_ => toast.classList.add('fade'))\n    }\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","// @ts-check\n/* eslint-disable global-require */\nexport { default as el } from './el.js'\nexport { default as svg } from './svg.js'\nexport { default as list } from './list.js'\nexport { default as find } from './find.js'\nexport { default as css } from './css.js'\n","import EVENTS from './src/events.js'\n\nvar htmlProps = {\n\tid: true,\n\tnodeValue: true,\n\ttextContent: true,\n\tclassName: true,\n\tinnerHTML: true,\n\ttabIndex: true,\n\tvalue: true\n}\n\n/**\n * @param {string|HTMLElement} tagName\n * @return {HTMLElement}\n */\nexport default function(tagName) {\n\t//@ts-ignore\n\tvar node = tagName.nodeType === 1 ? tagName : document.createElement(tagName)\n\n\tfor (var i=1; i<arguments.length; ++i) {\n\t\tvar arg = arguments[i]\n\t\tif (arg != null) {\n\t\t\t//TODO skip .constructor\n\t\t\tif (!arg.constructor || arg.constructor === Object) for (var j=0, ks=Object.keys(arg); j<ks.length; ++j) {\n\t\t\t\tvar key = ks[j],\n\t\t\t\t\t\tval = arg[key]\n\t\t\t\tif (key === 'style') node.style.cssText = val\n\t\t\t\telse if (typeof val !== 'string' || htmlProps[key]) {\n\t\t\t\t\tnode[key] = val\n\t\t\t\t\t//set synthetic events for onUpperCaseName\n\t\t\t\t\tif (key[0] === 'o' && key[1] === 'n' && key.charCodeAt(2) < 91 && key.charCodeAt(2) > 64 && !EVENTS[key]) {\n\t\t\t\t\t\tdocument.addEventListener(key.slice(2).toLowerCase(), function(e) {\n\t\t\t\t\t\t\tvar tgt = e.target\n\t\t\t\t\t\t\tdo if (tgt[key]) return tgt[key](e)\n\t\t\t\t\t\t\twhile((tgt = tgt.parentNode))\n\t\t\t\t\t\t})\n\t\t\t\t\t\tEVENTS[key] = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse node.setAttribute(key, val)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (Array.isArray(arg)) for (var k=0; k<arg.length; ++k) node.appendChild(\n\t\t\t\t\targ[k].nodeType ? arg[k] : document.createTextNode(arg[k])\n\t\t\t\t)\n\t\t\t\telse node.appendChild(arg.nodeType ? arg : document.createTextNode(arg))\n\t\t\t}\n\t\t}\n\t}\n\treturn node\n}\n","export default {}\n","import EVENTS from './src/events.js'\n\n/**\n * @param {string} tagName\n * @return {Element}\n */\nexport default function(tagName) {\n\t//@ts-ignore\n\tvar node = tagName.nodeType === 1 ? tagName : document.createElementNS('http://www.w3.org/2000/svg', tagName)\n\n\tfor (var i=1; i<arguments.length; ++i) {\n\t\tvar arg = arguments[i]\n\t\tif (arg != null) {\n\t\t\t//TODO skip .constructor\n\t\t\tif (!arg.constructor || arg.constructor === Object) for (var j=0, ks=Object.keys(arg); j<ks.length; ++j) {\n\t\t\t\tvar key = ks[j],\n\t\t\t\t\t\tval = arg[key]\n\t\t\t\tif (typeof val !== 'string') {\n\t\t\t\t\tnode[key] = val\n\t\t\t\t\t//set synthetic events for onUpperCaseName\n\t\t\t\t\tif (key[0] === 'o' && key[1] === 'n' && key.charCodeAt(2) < 91 && key.charCodeAt(2) > 64 && !EVENTS[key]) {\n\t\t\t\t\t\tdocument.addEventListener(key.slice(2).toLowerCase(), function(e) { //eslint-disable-line\n\t\t\t\t\t\t\tvar tgt = e.target\n\t\t\t\t\t\t\tdo if (tgt[key]) return tgt[key](e)\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\twhile((tgt = tgt.parentNode))\n\t\t\t\t\t\t})\n\t\t\t\t\t\tEVENTS[key] = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse node.setAttribute(key, val)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (Array.isArray(arg)) for (var k=0; k<arg.length; ++k) node.appendChild(\n\t\t\t\t\targ[k].nodeType ? arg[k] : document.createTextNode(arg[k])\n\t\t\t\t)\n\t\t\t\telse node.appendChild(arg.nodeType ? arg : document.createTextNode(arg))\n\t\t\t}\n\t\t}\n\t}\n\treturn node\n}\n","import { saveAs } from 'file-saver'\n//import { readKey, encrypt, createMessage } from 'openpgp'\n\nexport const equal = (x, y) => x === y\n\nexport const setClass = (elem, cl, bool) => bool ? elem.classList.add(cl) : elem.classList.remove(cl)\n\nexport const err = (...args) => {throw new Error(...args)}\n\nexport const sleep = ms => new Promise(res => setTimeout(res, ms))\n\nexport const pipe = (x, ...fns) => fns.reduce((acc, fn) => fn(acc), x)\n\nexport const flow = (...fns) => x => fns.reduce((acc, fn) => fn(acc), x)\n\nexport const zip = rows => rows[0].map( (_,c) => rows.map( row => row[c] ))\n\nexport function* take(n, iter) {\n    for (const x of iter) {\n        if (n < 1) break;\n        yield x;\n        n -= 1;\n    }\n}\n\nexport function setUnion(...sets) {\n    const union = new Set(sets.shift())\n    for (const currSet of sets) {\n        for (const elem of currSet) {\n            union.add(elem)\n        }\n    }\n    return union\n}\n\nexport const arrayUnique = (arr) => Array.from(new Set(arr))\n\nexport function filterObjectByEntry(obj, pred) {\n    return Object.fromEntries(Object.entries(obj).filter(pred))\n}\n\nexport function filterObjectByKey(obj, pred) {\n    return filterObjectByEntry(obj, ([key, _]) => pred(key))\n}\n\nexport const substituteText =\n    (template, context) => template.replaceAll(/{(\\w+)}/g, (match, key) => context[key] ?? match)\n\nexport class Tree extends Map {\n    constructor(root, attributes = {}) {\n        super()\n\n        if (root) {this.setRoot(root, attributes)}\n    }\n\n    root = null\n\n    setRoot(node, attributes = {}) {\n        if (this.root !== null) throw new Error(`root '${this.root}' already exists`)\n        this.set(node, Object.assign(attributes, {children: [], parent: null}))\n        this.root = node\n    }\n\n    addChild(parent, child, attributes = {}) {\n        if (this.get(child) !== undefined) {throw new Error(`child ${child} already exists`)}\n        this.get(parent)?.children?.push(child) ?? err(`parent '${parent}' does not exist or is malformed`)\n        this.set(child, Object.assign(attributes, {children: [], parent: parent}))\n    }\n\n    deleteNode(node) {\n        for (const child of this.get(node).children) {\n            this.deleteNode(child)\n        }\n        this.delete(node)\n    }\n\n    toObject(morphism) {\n        if (typeof(morphism) === 'function') {\n            return Object.fromEntries(Array.from(this, morphism))\n        } else {\n            return Object.fromEntries(this)\n        }\n    }\n\n    getAncestryOf(node) {\n        const ancestry = []\n        let parent = this.get(node).parent\n        while (parent !== null) {\n            ancestry.unshift(parent)\n            parent = this.get(parent).parent\n        }\n        return ancestry\n    }\n\n    // I don't trust this algorithm. Does it have bugs? Is it efficient? Does it cover all edge\n    //   cases? No clue. But it's not recursive.\n    // Collapses `tree` into a single value using an accumulator function `f` (similar to `reduce`)\n    //   optionally starting at subtree `node`. `f` is passed each node except the node's\n    //   `children` attribute instead holds the results of applying `f` to the node's children.\n    static cata(tree, node = null, f) {\n        const newLayer = node => ({node, before: [...tree.get(node).children], after: []})\n        const stack = [newLayer(node ?? tree.root)]\n\n        while (true) {\n            if (stack.at(-1).before.length) {\n                stack.push(newLayer(stack.at(-1).before.pop()))\n            } else {\n                const curr = stack.pop()\n                const res = f({...tree.get(curr.node), children: curr.after})\n                if (!stack.length) return res\n                stack.at(-1).after.push(res)\n            }\n        }\n    }\n\n    static fromGraphBfs(getChildren, root) {\n        const tree = new Tree(root)\n        const frontier = [root]\n\n        const addChildOf = (currentNode) => (id, data = {}) => {\n            if (!tree.has(id)) {\n                frontier.push(id)\n                tree.addChild(currentNode, id, data)\n            }\n        }\n\n        while (frontier.length > 0) {\n            const currentNode = frontier.pop()\n            getChildren(addChildOf(currentNode), currentNode)\n        }\n        return tree\n    }\n}\n\n/// HTML ///\n\nexport const cloneTemplateFrom = (doc) => (templateId) => {\n    // NOTE importNode works like cloneNode except it upgrades custom elements. Needed because\n    //   it works on template contents, unlike customElements.upgrade.\n    const template = doc.importNode(doc.getElementById(templateId).content, true)\n    // clear the fragment of extraneous nodes that might break things\n    // TODO Apply recursively to comments\n    Array.from(template.childNodes).forEach(el => {\n        if ((el.nodeName === '#text' && !el.nodeValue.trim()) || el.nodeName === '#comment') {el.remove()}\n    })\n    return template\n}\n\nexport function parseDoc(docText) {\n    return new DOMParser().parseFromString(docText, \"text/html\")\n}\n\nexport function exportObject(obj, filename) {\n    saveAs(new Blob([JSON.stringify(obj)], {type: 'application/json'}), filename)\n}\n\nexport async function encryptMessage(armoredPublicKey, text) {\n    const { readKey, encrypt, createMessage } = await import('openpgp')\n    return await encrypt({\n        message: await createMessage({text}),\n        encryptionKeys: await readKey({armoredKey: armoredPublicKey})\n    })\n}","import defineProperty from './_define_property.mjs';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\n\nexport default function _objectSpreadProps(target, source) {\n  source = source != null ? source : {}\n  if (Object.getOwnPropertyDescriptors) {\n    Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n  } else {\n    ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(\n        target,\n        key,\n        Object.getOwnPropertyDescriptor(source, key)\n      );\n    });\n  }\n\n  return target;\n}","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","module.exports = (require(\"./helpers/browser/import-polyfill\")(require('./helpers/bundle-url').getBundleURL('gOfOb') + require('./helpers/bundle-manifest').resolve(\"gwDts\"))).then(() => parcelRequire('26wHK'));","\"use strict\";\n\nvar cacheLoader = require('../cacheLoader');\n\nmodule.exports = cacheLoader(function (bundle) {\n  return new Promise(function (resolve, reject) {\n    // Add a global function to handle when the script loads.\n    var globalName = \"i\".concat(('' + Math.random()).slice(2));\n\n    global[globalName] = function (m) {\n      resolve(m);\n      cleanup();\n    }; // Remove script on load or error\n\n\n    var cleanup = function () {\n      delete global[globalName];\n      script.onerror = null;\n      script.remove();\n    }; // Append an inline script tag into the document head\n\n\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'module';\n    script.charset = 'utf-8';\n    script.textContent = \"import * as m from '\".concat(bundle, \"'; \").concat(globalName, \"(m);\");\n\n    script.onerror = function (e) {\n      reject(e);\n      cleanup();\n    };\n\n    document.head.appendChild(script);\n  });\n});","\"use strict\";\n\nvar cachedBundles = {};\nvar cachedPreloads = {};\nvar cachedPrefetches = {};\n\nfunction getCache(type) {\n  switch (type) {\n    case 'preload':\n      return cachedPreloads;\n\n    case 'prefetch':\n      return cachedPrefetches;\n\n    default:\n      return cachedBundles;\n  }\n}\n\nmodule.exports = function (loader, type) {\n  return function (bundle) {\n    var cache = getCache(type);\n\n    if (cache[bundle]) {\n      return cache[bundle];\n    }\n\n    return cache[bundle] = loader.apply(null, arguments).catch(function (e) {\n      delete cache[bundle];\n      throw e;\n    });\n  };\n};","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","'use strict';\n\nvar curryN = require('ramda/src/curryN');\n\n// Utility\nfunction isFunction(obj) {\n  return !!(obj && obj.constructor && obj.call && obj.apply);\n}\nfunction trueFn() { return true; }\n\n// Globals\nvar toUpdate = [];\nvar inStream;\nvar order = [];\nvar orderNextIdx = -1;\nvar flushingUpdateQueue = false;\nvar flushingStreamValue = false;\n\nfunction flushing() {\n  return flushingUpdateQueue || flushingStreamValue;\n}\n\n\n/** @namespace */\nvar flyd = {}\n\n// /////////////////////////// API ///////////////////////////////// //\n\n/**\n * Creates a new stream\n *\n * __Signature__: `a -> Stream a`\n *\n * @name flyd.stream\n * @param {*} initialValue - (Optional) the initial value of the stream\n * @return {stream} the stream\n *\n * @example\n * var n = flyd.stream(1); // Stream with initial value `1`\n * var s = flyd.stream(); // Stream with no initial value\n */\nflyd.stream = function(initialValue) {\n  var endStream = createDependentStream([], trueFn);\n  var s = createStream();\n  s.end = endStream;\n  s.fnArgs = [];\n  endStream.listeners.push(s);\n  if (arguments.length > 0) s(initialValue);\n  return s;\n}\n// fantasy-land Applicative\nflyd.stream['fantasy-land/of'] = flyd.stream.of = flyd.stream;\n\n\n/**\n * Create a new dependent stream\n *\n * __Signature__: `(...Stream * -> Stream b -> b) -> [Stream *] -> Stream b`\n *\n * @name flyd.combine\n * @param {Function} fn - the function used to combine the streams\n * @param {Array<stream>} dependencies - the streams that this one depends on\n * @return {stream} the dependent stream\n *\n * @example\n * var n1 = flyd.stream(0);\n * var n2 = flyd.stream(0);\n * var max = flyd.combine(function(n1, n2, self, changed) {\n *   return n1() > n2() ? n1() : n2();\n * }, [n1, n2]);\n */\nflyd.combine = curryN(2, combine);\nfunction combine(fn, streams) {\n  var i, s, deps, depEndStreams;\n  var endStream = createDependentStream([], trueFn);\n  deps = []; depEndStreams = [];\n  for (i = 0; i < streams.length; ++i) {\n    if (streams[i] !== undefined) {\n      deps.push(streams[i]);\n      if (streams[i].end !== undefined) depEndStreams.push(streams[i].end);\n    }\n  }\n  s = createDependentStream(deps, fn);\n  s.depsChanged = [];\n  s.fnArgs = s.deps.concat([s, s.depsChanged]);\n  s.end = endStream;\n  endStream.listeners.push(s);\n  addListeners(depEndStreams, endStream);\n  endStream.deps = depEndStreams;\n  updateStream(s);\n  return s;\n}\n\n/**\n * Returns `true` if the supplied argument is a Flyd stream and `false` otherwise.\n *\n * __Signature__: `* -> Boolean`\n *\n * @name flyd.isStream\n * @param {*} value - the value to test\n * @return {Boolean} `true` if is a Flyd streamn, `false` otherwise\n *\n * @example\n * var s = flyd.stream(1);\n * var n = 1;\n * flyd.isStream(s); //=> true\n * flyd.isStream(n); //=> false\n */\nflyd.isStream = function(stream) {\n  return isFunction(stream) && 'hasVal' in stream;\n}\n\n/**\n * Invokes the body (the function to calculate the value) of a dependent stream\n *\n * By default the body of a dependent stream is only called when all the streams\n * upon which it depends has a value. `immediate` can circumvent this behaviour.\n * It immediately invokes the body of a dependent stream.\n *\n * __Signature__: `Stream a -> Stream a`\n *\n * @name flyd.immediate\n * @param {stream} stream - the dependent stream\n * @return {stream} the same stream\n *\n * @example\n * var s = flyd.stream();\n * var hasItems = flyd.immediate(flyd.combine(function(s) {\n *   return s() !== undefined && s().length > 0;\n * }, [s]);\n * console.log(hasItems()); // logs `false`. Had `immediate` not been\n *                          // used `hasItems()` would've returned `undefined`\n * s([1]);\n * console.log(hasItems()); // logs `true`.\n * s([]);\n * console.log(hasItems()); // logs `false`.\n */\nflyd.immediate = function(s) {\n  if (s.depsMet === false) {\n    s.depsMet = true;\n    updateStream(s);\n  }\n  return s;\n}\n\n/**\n * Changes which `endsStream` should trigger the ending of `s`.\n *\n * __Signature__: `Stream a -> Stream b -> Stream b`\n *\n * @name flyd.endsOn\n * @param {stream} endStream - the stream to trigger the ending\n * @param {stream} stream - the stream to be ended by the endStream\n * @param {stream} the stream modified to be ended by endStream\n *\n * @example\n * var n = flyd.stream(1);\n * var killer = flyd.stream();\n * // `double` ends when `n` ends or when `killer` emits any value\n * var double = flyd.endsOn(flyd.merge(n.end, killer), flyd.combine(function(n) {\n *   return 2 * n();\n * }, [n]);\n*/\nflyd.endsOn = function(endS, s) {\n  detachDeps(s.end);\n  endS.listeners.push(s.end);\n  s.end.deps.push(endS);\n  return s;\n}\n\n/**\n * Map a stream\n *\n * Returns a new stream consisting of every value from `s` passed through\n * `fn`. I.e. `map` creates a new stream that listens to `s` and\n * applies `fn` to every new value.\n * __Signature__: `(a -> result) -> Stream a -> Stream result`\n *\n * @name flyd.map\n * @param {Function} fn - the function that produces the elements of the new stream\n * @param {stream} stream - the stream to map\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = flyd.map(function(n) { return n*n; }, numbers);\n */\n// Library functions use self callback to accept (null, undefined) update triggers.\nfunction map(f, s) {\n  return combine(function(s, self) { self(f(s.val)); }, [s]);\n}\nflyd.map = curryN(2, map)\n\n/**\n * Chain a stream\n *\n * also known as flatMap\n *\n * Where `fn` returns a stream this function will flatten the resulting streams.\n * Every time `fn` is called the context of the returned stream will \"switch\" to that stream.\n *\n * __Signature__: `(a -> Stream b) -> Stream a -> Stream b`\n *\n * @name flyd.chain\n * @param {Function} fn - the function that produces the streams to be flattened\n * @param {stream} stream - the stream to map\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var filter = flyd.stream('who');\n * var items = flyd.chain(function(filter){\n *   return flyd.stream(findUsers(filter));\n * }, filter);\n */\nflyd.chain = curryN(2, chain);\n\n/**\n * Apply a stream\n *\n * Applies the value in `s2` to the function in `s1`.\n *\n * __Signature__: `Stream (a -> b) -> Stream a -> Stream b`\n *\n * @name flyd.ap\n * @param {stream} s1 - The value to be applied\n * @param {stream} s2 - The function expecting the value\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var add = stream(a => b => a + b)\n * var n1 = stream(1)\n * var n2 = stream(2)\n *\n * var added = flyd.ap(n2, flyd.ap(n1, add)) // stream(3)\n * // can also be written using pipe\n * var added_pipe = add\n *   .pipe(ap(n1))\n *   .pipe(ap(n2));\n * added_pipe() // 3\n */\nflyd.ap = curryN(2, ap);\n\n/**\n * Listen to stream events\n *\n * Similar to `map` except that the returned stream is empty. Use `on` for doing\n * side effects in reaction to stream changes. Use the returned stream only if you\n * need to manually end it.\n *\n * __Signature__: `(a -> result) -> Stream a -> Stream undefined`\n *\n * @name flyd.on\n * @param {Function} cb - the callback\n * @param {stream} stream - the stream\n * @return {stream} an empty stream (can be ended)\n */\nflyd.on = curryN(2, function(f, s) {\n  return combine(function(s) { f(s.val); }, [s]);\n})\n\n/**\n * Creates a new stream with the results of calling the function on every incoming\n * stream with and accumulator and the incoming value.\n *\n * __Signature__: `(a -> b -> a) -> a -> Stream b -> Stream a`\n *\n * @name flyd.scan\n * @param {Function} fn - the function to call\n * @param {*} val - the initial value of the accumulator\n * @param {stream} stream - the stream source\n * @return {stream} the new stream\n *\n * @example\n * var numbers = flyd.stream();\n * var sum = flyd.scan(function(sum, n) { return sum+n; }, 0, numbers);\n * numbers(2)(3)(5);\n * sum(); // 10\n */\nflyd.scan = curryN(3, function(f, acc, s) {\n  var ns = combine(function(s, self) {\n    self(acc = f(acc, s.val));\n  }, [s]);\n  if (!ns.hasVal) ns(acc);\n  return ns;\n});\n\n/**\n * Creates a new stream down which all values from both `stream1` and `stream2`\n * will be sent.\n *\n * __Signature__: `Stream a -> Stream a -> Stream a`\n *\n * @name flyd.merge\n * @param {stream} source1 - one stream to be merged\n * @param {stream} source2 - the other stream to be merged\n * @return {stream} a stream with the values from both sources\n *\n * @example\n * var btn1Clicks = flyd.stream();\n * button1Elm.addEventListener(btn1Clicks);\n * var btn2Clicks = flyd.stream();\n * button2Elm.addEventListener(btn2Clicks);\n * var allClicks = flyd.merge(btn1Clicks, btn2Clicks);\n */\nflyd.merge = curryN(2, function(s1, s2) {\n  var s = flyd.immediate(combine(function(s1, s2, self, changed) {\n    if (changed[0]) {\n      self(changed[0]());\n    } else if (s1.hasVal) {\n      self(s1.val);\n    } else if (s2.hasVal) {\n      self(s2.val);\n    }\n  }, [s1, s2]));\n  flyd.endsOn(combine(function() {\n    return true;\n  }, [s1.end, s2.end]), s);\n  return s;\n});\n\n/**\n * Creates a new stream resulting from applying `transducer` to `stream`.\n *\n * __Signature__: `Transducer -> Stream a -> Stream b`\n *\n * @name flyd.transduce\n * @param {Transducer} xform - the transducer transformation\n * @param {stream} source - the stream source\n * @return {stream} the new stream\n *\n * @example\n * var t = require('transducers.js');\n *\n * var results = [];\n * var s1 = flyd.stream();\n * var tx = t.compose(t.map(function(x) { return x * 2; }), t.dedupe());\n * var s2 = flyd.transduce(tx, s1);\n * flyd.combine(function(s2) { results.push(s2()); }, [s2]);\n * s1(1)(1)(2)(3)(3)(3)(4);\n * results; // => [2, 4, 6, 8]\n */\nflyd.transduce = curryN(2, function(xform, source) {\n  xform = xform(new StreamTransformer());\n  return combine(function(source, self) {\n    var res = xform['@@transducer/step'](undefined, source.val);\n    if (res && res['@@transducer/reduced'] === true) {\n      self.end(true);\n      return res['@@transducer/value'];\n    } else {\n      return res;\n    }\n  }, [source]);\n});\n\n/**\n * Returns `fn` curried to `n`. Use this function to curry functions exposed by\n * modules for Flyd.\n *\n * @name flyd.curryN\n * @function\n * @param {Integer} arity - the function arity\n * @param {Function} fn - the function to curry\n * @return {Function} the curried function\n *\n * @example\n * function add(x, y) { return x + y; };\n * var a = flyd.curryN(2, add);\n * a(2)(4) // => 6\n */\nflyd.curryN = curryN\n\n/**\n * Returns a new stream identical to the original except every\n * value will be passed through `f`.\n *\n * _Note:_ This function is included in order to support the fantasy land\n * specification.\n *\n * __Signature__: Called bound to `Stream a`: `(a -> b) -> Stream b`\n *\n * @name stream.map\n * @param {Function} function - the function to apply\n * @return {stream} a new stream with the values mapped\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = numbers.map(function(n) { return n*n; });\n */\nfunction boundMap(f) { return map(f, this); }\n\n/**\n * Returns the result of applying function `fn` to this stream\n *\n * __Signature__: Called bound to `Stream a`: `(a -> Stream b) -> Stream b`\n *\n * @name stream.pipe\n * @param {Function} fn - the function to apply\n * @return {stream} A new stream\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = numbers.pipe(flyd.map(function(n){ return n*n; }));\n */\nfunction operator_pipe(f) { return f(this) }\n\nfunction boundChain(f) {\n  return chain(f, this);\n}\n\nfunction chain(f, s) {\n  // Internal state to end flat map stream\n  var flatEnd = flyd.stream(1);\n  var internalEnded = flyd.on(function() {\n    var alive = flatEnd() - 1;\n    flatEnd(alive);\n    if (alive <= 0) {\n      flatEnd.end(true);\n    }\n  });\n\n  internalEnded(s.end);\n  var last = flyd.stream();\n  var flatStream = flyd.combine(function(s, own) {\n    last.end(true)\n    // Our fn stream makes streams\n    var newS = f(s());\n    flatEnd(flatEnd() + 1);\n    internalEnded(newS.end);\n\n    // Update self on call -- newS is never handed out so deps don't matter\n    last = map(own, newS);\n  }, [s]);\n\n  flyd.endsOn(flatEnd.end, flatStream);\n\n  return flatStream;\n}\n\nflyd.fromPromise = function fromPromise(p) {\n  var s = flyd.stream();\n  p.then(function(val) {\n    s(val);\n    s.end(true);\n  });\n  return s;\n}\n\nflyd.flattenPromise = function flattenPromise(s) {\n  return combine(function(s, self) {\n    s().then(self);\n  }, [s])\n}\n\n\n/**\n * Returns a new stream which is the result of applying the\n * functions from `this` stream to the values in `stream` parameter.\n *\n * `this` stream must be a stream of functions.\n *\n * _Note:_ This function is included in order to support the fantasy land\n * specification.\n *\n * __Signature__: Called bound to `Stream (a -> b)`: `a -> Stream b`\n *\n * @name stream.ap\n * @param {stream} stream - the values stream\n * @return {stream} a new stream with the functions applied to values\n *\n * @example\n * var add = flyd.curryN(2, function(x, y) { return x + y; });\n * var numbers1 = flyd.stream();\n * var numbers2 = flyd.stream();\n * var addToNumbers1 = flyd.map(add, numbers1);\n * var added = addToNumbers1.ap(numbers2);\n */\nfunction ap(s2, s1) {\n  return combine(function(s1, s2, self) { self(s1.val(s2.val)); }, [s1, s2]);\n}\n\nfunction boundAp(s2) {\n  return ap(s2, this);\n}\n\n/**\n * @private\n */\nfunction fantasy_land_ap(s1) {\n  return ap(this, s1);\n}\n\n/**\n * Get a human readable view of a stream\n * @name stream.toString\n * @return {String} the stream string representation\n */\nfunction streamToString() {\n  return 'stream(' + this.val + ')';\n}\n\n/**\n * @name stream.end\n * @memberof stream\n * A stream that emits `true` when the stream ends. If `true` is pushed down the\n * stream the parent stream ends.\n */\n\n/**\n * @name stream.of\n * @function\n * @memberof stream\n * Returns a new stream with `value` as its initial value. It is identical to\n * calling `flyd.stream` with one argument.\n *\n * __Signature__: Called bound to `Stream (a)`: `b -> Stream b`\n *\n * @param {*} value - the initial value\n * @return {stream} the new stream\n *\n * @example\n * var n = flyd.stream(1);\n * var m = n.of(1);\n */\n\n// /////////////////////////// PRIVATE ///////////////////////////////// //\n/**\n * @private\n * Create a stream with no dependencies and no value\n * @return {Function} a flyd stream\n */\nfunction createStream() {\n  function s(n) {\n    if (arguments.length === 0) return s.val\n    updateStreamValue(n, s)\n    return s\n  }\n  s.hasVal = false;\n  s.val = undefined;\n  s.updaters = [];\n  s.listeners = [];\n  s.queued = false;\n  s.end = undefined;\n\n  // fantasy-land compatibility\n  s.ap = boundAp;\n  s['fantasy-land/map'] = s.map = boundMap;\n  s['fantasy-land/ap'] = fantasy_land_ap;\n  s['fantasy-land/of'] = s.of = flyd.stream;\n  s['fantasy-land/chain'] = s.chain = boundChain;\n\n  s.pipe = operator_pipe;\n\n  // According to the fantasy-land Applicative specification\n  // Given a value f, one can access its type representative via the constructor property:\n  // `f.constructor.of`\n  s.constructor = flyd.stream;\n\n  s.toJSON = function() {\n    return s.val;\n  }\n  s.toString = streamToString;\n  return s;\n}\n\n/**\n * @private\n * Create a dependent stream\n * @param {Array<stream>} dependencies - an array of the streams\n * @param {Function} fn - the function used to calculate the new stream value\n * from the dependencies\n * @return {stream} the created stream\n */\nfunction createDependentStream(deps, fn) {\n  var s = createStream();\n  s.fn = fn;\n  s.deps = deps;\n  s.depsMet = false;\n  s.depsChanged = deps.length > 0 ? [] : undefined;\n  s.shouldUpdate = false;\n  addListeners(deps, s);\n  return s;\n}\n\n/**\n * @private\n * Check if all the dependencies have values\n * @param {stream} stream - the stream to check depencencies from\n * @return {Boolean} `true` if all dependencies have vales, `false` otherwise\n */\nfunction initialDependenciesMet(stream) {\n  stream.depsMet = stream.deps.every(function(s) {\n    return s.hasVal;\n  });\n  return stream.depsMet;\n}\n\nfunction dependenciesAreMet(stream) {\n  return stream.depsMet === true || initialDependenciesMet(stream);\n}\n\nfunction isEnded(stream) {\n  return stream.end && stream.end.val === true;\n}\n\nfunction listenersNeedUpdating(s) {\n  return s.listeners.some(function(s) { return s.shouldUpdate; });\n}\n\n/**\n * @private\n * Update a dependent stream using its dependencies in an atomic way\n * @param {stream} stream - the stream to update\n */\nfunction updateStream(s) {\n  if (isEnded(s) || !dependenciesAreMet(s)) return;\n  if (inStream !== undefined) {\n    updateLaterUsing(updateStream, s);\n    return;\n  }\n  inStream = s;\n  if (s.depsChanged) s.fnArgs[s.fnArgs.length - 1] = s.depsChanged;\n  var returnVal = s.fn.apply(s.fn, s.fnArgs);\n  if (returnVal !== undefined) {\n    s(returnVal);\n  }\n  inStream = undefined;\n  if (s.depsChanged !== undefined) s.depsChanged = [];\n  s.shouldUpdate = false;\n  if (flushing() === false) flushUpdate();\n  if (listenersNeedUpdating(s)) {\n    if (!flushingStreamValue) s(s.val)\n    else {\n      s.listeners.forEach(function(listener) {\n        if (listener.shouldUpdate) updateLaterUsing(updateStream, listener);\n      });\n    }\n  }\n}\n\n/**\n * @private\n * Update the dependencies of a stream\n * @param {stream} stream\n */\nfunction updateListeners(s) {\n  var i, o, list\n  var listeners = s.listeners;\n  for (i = 0; i < listeners.length; ++i) {\n    list = listeners[i];\n    if (list.end === s) {\n      endStream(list);\n    } else {\n      if (list.depsChanged !== undefined) list.depsChanged.push(s);\n      list.shouldUpdate = true;\n      findDeps(list);\n    }\n  }\n  for (; orderNextIdx >= 0; --orderNextIdx) {\n    o = order[orderNextIdx];\n    if (o.shouldUpdate === true) updateStream(o);\n    o.queued = false;\n  }\n}\n\n/**\n * @private\n * Add stream dependencies to the global `order` queue.\n * @param {stream} stream\n * @see updateDeps\n */\nfunction findDeps(s) {\n  var i\n  var listeners = s.listeners;\n  if (s.queued === false) {\n    s.queued = true;\n    for (i = 0; i < listeners.length; ++i) {\n      findDeps(listeners[i]);\n    }\n    order[++orderNextIdx] = s;\n  }\n}\n\nfunction updateLaterUsing(updater, stream) {\n  toUpdate.push(stream);\n  stream.updaters.push(updater);\n  stream.shouldUpdate = true;\n}\n\n/**\n * @private\n */\nfunction flushUpdate() {\n  flushingUpdateQueue = true;\n  while (toUpdate.length > 0) {\n    var stream = toUpdate.shift();\n    var nextUpdateFn = stream.updaters.shift();\n    if (nextUpdateFn && stream.shouldUpdate) nextUpdateFn(stream);\n  }\n  flushingUpdateQueue = false;\n}\n\n/**\n * @private\n * Push down a value into a stream\n * @param {stream} stream\n * @param {*} value\n */\nfunction updateStreamValue(n, s) {\n  s.val = n;\n  s.hasVal = true;\n  if (inStream === undefined) {\n    flushingStreamValue = true;\n    updateListeners(s);\n    if (toUpdate.length > 0) flushUpdate();\n    flushingStreamValue = false;\n  } else if (inStream === s) {\n    markListeners(s, s.listeners);\n  } else {\n    updateLaterUsing(function(s) { updateStreamValue(n, s); }, s);\n  }\n}\n\n/**\n * @private\n */\nfunction markListeners(s, lists) {\n  var i, list;\n  for (i = 0; i < lists.length; ++i) {\n    list = lists[i];\n    if (list.end !== s) {\n      if (list.depsChanged !== undefined) {\n        list.depsChanged.push(s);\n      }\n      list.shouldUpdate = true;\n    } else {\n      endStream(list);\n    }\n  }\n}\n\n/**\n * @private\n * Add dependencies to a stream\n * @param {Array<stream>} dependencies\n * @param {stream} stream\n */\nfunction addListeners(deps, s) {\n  for (var i = 0; i < deps.length; ++i) {\n    deps[i].listeners.push(s);\n  }\n}\n\n/**\n * @private\n * Removes an stream from a dependency array\n * @param {stream} stream\n * @param {Array<stream>} dependencies\n */\nfunction removeListener(s, listeners) {\n  var idx = listeners.indexOf(s);\n  listeners[idx] = listeners[listeners.length - 1];\n  listeners.length--;\n}\n\n/**\n * @private\n * Detach a stream from its dependencies\n * @param {stream} stream\n */\nfunction detachDeps(s) {\n  for (var i = 0; i < s.deps.length; ++i) {\n    removeListener(s, s.deps[i].listeners);\n  }\n  s.deps.length = 0;\n}\n\n/**\n * @private\n * Ends a stream\n */\nfunction endStream(s) {\n  if (s.deps !== undefined) detachDeps(s);\n  if (s.end !== undefined) detachDeps(s.end);\n}\n\n/**\n * @private\n */\n/**\n * @private\n * transducer stream transformer\n */\nfunction StreamTransformer() { }\nStreamTransformer.prototype['@@transducer/init'] = function() { };\nStreamTransformer.prototype['@@transducer/result'] = function() { };\nStreamTransformer.prototype['@@transducer/step'] = function(s, v) { return v; };\n\nmodule.exports = flyd;\n","var _arity = /*#__PURE__*/require('./internal/_arity');\n\nvar _curry1 = /*#__PURE__*/require('./internal/_curry1');\n\nvar _curry2 = /*#__PURE__*/require('./internal/_curry2');\n\nvar _curryN = /*#__PURE__*/require('./internal/_curryN');\n\n/**\n * Returns a curried equivalent of the provided function, with the specified\n * arity. The curried function has two unusual capabilities. First, its\n * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value [`R.__`](#__) may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is [`R.__`](#__),\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      var sumArgs = (...args) => R.sum(args);\n *\n *      var curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      var f = curriedAddFourNumbers(1, 2);\n *      var g = f(3);\n *      g(4); //=> 10\n */\n\n\nvar curryN = /*#__PURE__*/_curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n  return _arity(length, _curryN(length, [], fn));\n});\nmodule.exports = curryN;","function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0:\n      return function () {\n        return fn.apply(this, arguments);\n      };\n    case 1:\n      return function (a0) {\n        return fn.apply(this, arguments);\n      };\n    case 2:\n      return function (a0, a1) {\n        return fn.apply(this, arguments);\n      };\n    case 3:\n      return function (a0, a1, a2) {\n        return fn.apply(this, arguments);\n      };\n    case 4:\n      return function (a0, a1, a2, a3) {\n        return fn.apply(this, arguments);\n      };\n    case 5:\n      return function (a0, a1, a2, a3, a4) {\n        return fn.apply(this, arguments);\n      };\n    case 6:\n      return function (a0, a1, a2, a3, a4, a5) {\n        return fn.apply(this, arguments);\n      };\n    case 7:\n      return function (a0, a1, a2, a3, a4, a5, a6) {\n        return fn.apply(this, arguments);\n      };\n    case 8:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        return fn.apply(this, arguments);\n      };\n    case 9:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        return fn.apply(this, arguments);\n      };\n    case 10:\n      return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n        return fn.apply(this, arguments);\n      };\n    default:\n      throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n}\nmodule.exports = _arity;","var _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}\nmodule.exports = _curry1;","function _isPlaceholder(a) {\n       return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}\nmodule.exports = _isPlaceholder;","var _curry1 = /*#__PURE__*/require('./_curry1');\n\nvar _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n      case 1:\n        return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n          return fn(a, _b);\n        });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n          return fn(_a, b);\n        }) : _isPlaceholder(b) ? _curry1(function (_b) {\n          return fn(a, _b);\n        }) : fn(a, b);\n    }\n  };\n}\nmodule.exports = _curry2;","var _arity = /*#__PURE__*/require('./_arity');\n\nvar _isPlaceholder = /*#__PURE__*/require('./_isPlaceholder');\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @param {Array} received An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\n\nfunction _curryN(length, received, fn) {\n  return function () {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (!_isPlaceholder(result)) {\n        left -= 1;\n      }\n      combinedIdx += 1;\n    }\n    return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n  };\n}\nmodule.exports = _curryN;","var flyd = require('../../lib');\n\nfunction dropRepeatsWith(eq, s) {\n  var prev;\n  return flyd.combine(function(s, self) {\n    if (!self.hasVal || !eq(s.val, prev)) {\n      self(s.val);\n      prev = s.val;\n    }\n  }, [s]);\n}\n\nexports.dropRepeats = function(s) {\n  return dropRepeatsWith(strictEq, s);\n};\n\nexports.dropRepeatsWith = flyd.curryN(2, dropRepeatsWith);\n\nfunction strictEq(a, b) {\n  return a === b;\n}\n","module.exports = \"b517ddadbe8d424c\";","/**\n * @fileOverview Contains definition of the core graph object.\n */\n\n// TODO: need to change storage layer:\n// 1. Be able to get all nodes O(1)\n// 2. Be able to get number of links O(1)\n\n/**\n * @example\n *  var graph = require('ngraph.graph')();\n *  graph.addNode(1);     // graph has one node.\n *  graph.addLink(2, 3);  // now graph contains three nodes and one link.\n *\n */\nmodule.exports = createGraph;\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates a new graph\n */\nfunction createGraph(options) {\n  // Graph structure is maintained as dictionary of nodes\n  // and array of links. Each node has 'links' property which\n  // hold all links related to that node. And general links\n  // array is used to speed up all links enumeration. This is inefficient\n  // in terms of memory, but simplifies coding.\n  options = options || {};\n  if ('uniqueLinkId' in options) {\n    console.warn(\n      'ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\\n' +\n      'Use `multigraph` option instead\\n',\n      '\\n',\n      'Note: there is also change in default behavior: From now on each graph\\n'+\n      'is considered to be not a multigraph by default (each edge is unique).'\n    );\n\n    options.multigraph = options.uniqueLinkId;\n  }\n\n  // Dear reader, the non-multigraphs do not guarantee that there is only\n  // one link for a given pair of node. When this option is set to false\n  // we can save some memory and CPU (18% faster for non-multigraph);\n  if (options.multigraph === undefined) options.multigraph = false;\n\n  if (typeof Map !== 'function') {\n    // TODO: Should we polyfill it ourselves? We don't use much operations there..\n    throw new Error('ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph');\n  } \n\n  var nodes = new Map();\n  var links = [],\n    // Hash of multi-edges. Used to track ids of edges between same nodes\n    multiEdges = {},\n    suspendEvents = 0,\n\n    createLink = options.multigraph ? createUniqueLink : createSingleLink,\n\n    // Our graph API provides means to listen to graph changes. Users can subscribe\n    // to be notified about changes in the graph by using `on` method. However\n    // in some cases they don't use it. To avoid unnecessary memory consumption\n    // we will not record graph changes until we have at least one subscriber.\n    // Code below supports this optimization.\n    //\n    // Accumulates all changes made during graph updates.\n    // Each change element contains:\n    //  changeType - one of the strings: 'add', 'remove' or 'update';\n    //  node - if change is related to node this property is set to changed graph's node;\n    //  link - if change is related to link this property is set to changed graph's link;\n    changes = [],\n    recordLinkChange = noop,\n    recordNodeChange = noop,\n    enterModification = noop,\n    exitModification = noop;\n\n  // this is our public API:\n  var graphPart = {\n    /**\n     * Adds node to the graph. If node with given id already exists in the graph\n     * its data is extended with whatever comes in 'data' argument.\n     *\n     * @param nodeId the node's identifier. A string or number is preferred.\n     * @param [data] additional data for the node being added. If node already\n     *   exists its data object is augmented with the new one.\n     *\n     * @return {node} The newly added node or node with given id if it already exists.\n     */\n    addNode: addNode,\n\n    /**\n     * Adds a link to the graph. The function always create a new\n     * link between two nodes. If one of the nodes does not exists\n     * a new node is created.\n     *\n     * @param fromId link start node id;\n     * @param toId link end node id;\n     * @param [data] additional data to be set on the new link;\n     *\n     * @return {link} The newly created link\n     */\n    addLink: addLink,\n\n    /**\n     * Removes link from the graph. If link does not exist does nothing.\n     *\n     * @param link - object returned by addLink() or getLinks() methods.\n     *\n     * @returns true if link was removed; false otherwise.\n     */\n    removeLink: removeLink,\n\n    /**\n     * Removes node with given id from the graph. If node does not exist in the graph\n     * does nothing.\n     *\n     * @param nodeId node's identifier passed to addNode() function.\n     *\n     * @returns true if node was removed; false otherwise.\n     */\n    removeNode: removeNode,\n\n    /**\n     * Gets node with given identifier. If node does not exist undefined value is returned.\n     *\n     * @param nodeId requested node identifier;\n     *\n     * @return {node} in with requested identifier or undefined if no such node exists.\n     */\n    getNode: getNode,\n\n    /**\n     * Gets number of nodes in this graph.\n     *\n     * @return number of nodes in the graph.\n     */\n    getNodeCount: getNodeCount,\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getLinkCount: getLinkCount,\n\n    /**\n     * Synonym for `getLinkCount()`\n     */\n    getLinksCount: getLinkCount,\n    \n    /**\n     * Synonym for `getNodeCount()`\n     */\n    getNodesCount: getNodeCount,\n\n    /**\n     * Gets all links (inbound and outbound) from the node with given id.\n     * If node with given id is not found null is returned.\n     *\n     * @param nodeId requested node identifier.\n     *\n     * @return Array of links from and to requested node if such node exists;\n     *   otherwise null is returned.\n     */\n    getLinks: getLinks,\n\n    /**\n     * Invokes callback on each node of the graph.\n     *\n     * @param {Function(node)} callback Function to be invoked. The function\n     *   is passed one argument: visited node.\n     */\n    forEachNode: forEachNode,\n\n    /**\n     * Invokes callback on every linked (adjacent) node to the given one.\n     *\n     * @param nodeId Identifier of the requested node.\n     * @param {Function(node, link)} callback Function to be called on all linked nodes.\n     *   The function is passed two parameters: adjacent node and link object itself.\n     * @param oriented if true graph treated as oriented.\n     */\n    forEachLinkedNode: forEachLinkedNode,\n\n    /**\n     * Enumerates all links in the graph\n     *\n     * @param {Function(link)} callback Function to be called on all links in the graph.\n     *   The function is passed one parameter: graph's link object.\n     *\n     * Link object contains at least the following fields:\n     *  fromId - node id where link starts;\n     *  toId - node id where link ends,\n     *  data - additional data passed to graph.addLink() method.\n     */\n    forEachLink: forEachLink,\n\n    /**\n     * Suspend all notifications about graph changes until\n     * endUpdate is called.\n     */\n    beginUpdate: enterModification,\n\n    /**\n     * Resumes all notifications about graph changes and fires\n     * graph 'changed' event in case there are any pending changes.\n     */\n    endUpdate: exitModification,\n\n    /**\n     * Removes all nodes and links from the graph.\n     */\n    clear: clear,\n\n    /**\n     * Detects whether there is a link between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     * NOTE: this function is synonim for getLink()\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    hasLink: getLink,\n\n    /**\n     * Detects whether there is a node with given id\n     * \n     * Operation complexity is O(1)\n     * NOTE: this function is synonim for getNode()\n     *\n     * @returns node if there is one; Falsy value otherwise.\n     */\n    hasNode: getNode,\n\n    /**\n     * Gets an edge between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     *\n     * @param {string} fromId link start identifier\n     * @param {string} toId link end identifier\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    getLink: getLink\n  };\n\n  // this will add `on()` and `fire()` methods.\n  eventify(graphPart);\n\n  monitorSubscribers();\n\n  return graphPart;\n\n  function monitorSubscribers() {\n    var realOn = graphPart.on;\n\n    // replace real `on` with our temporary on, which will trigger change\n    // modification monitoring:\n    graphPart.on = on;\n\n    function on() {\n      // now it's time to start tracking stuff:\n      graphPart.beginUpdate = enterModification = enterModificationReal;\n      graphPart.endUpdate = exitModification = exitModificationReal;\n      recordLinkChange = recordLinkChangeReal;\n      recordNodeChange = recordNodeChangeReal;\n\n      // this will replace current `on` method with real pub/sub from `eventify`.\n      graphPart.on = realOn;\n      // delegate to real `on` handler:\n      return realOn.apply(graphPart, arguments);\n    }\n  }\n\n  function recordLinkChangeReal(link, changeType) {\n    changes.push({\n      link: link,\n      changeType: changeType\n    });\n  }\n\n  function recordNodeChangeReal(node, changeType) {\n    changes.push({\n      node: node,\n      changeType: changeType\n    });\n  }\n\n  function addNode(nodeId, data) {\n    if (nodeId === undefined) {\n      throw new Error('Invalid node identifier');\n    }\n\n    enterModification();\n\n    var node = getNode(nodeId);\n    if (!node) {\n      node = new Node(nodeId, data);\n      recordNodeChange(node, 'add');\n    } else {\n      node.data = data;\n      recordNodeChange(node, 'update');\n    }\n\n    nodes.set(nodeId, node);\n\n    exitModification();\n    return node;\n  }\n\n  function getNode(nodeId) {\n    return nodes.get(nodeId);\n  }\n\n  function removeNode(nodeId) {\n    var node = getNode(nodeId);\n    if (!node) {\n      return false;\n    }\n\n    enterModification();\n\n    var prevLinks = node.links;\n    if (prevLinks) {\n      node.links = null;\n      for(var i = 0; i < prevLinks.length; ++i) {\n        removeLink(prevLinks[i]);\n      }\n    }\n\n    nodes.delete(nodeId)\n\n    recordNodeChange(node, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n\n  function addLink(fromId, toId, data) {\n    enterModification();\n\n    var fromNode = getNode(fromId) || addNode(fromId);\n    var toNode = getNode(toId) || addNode(toId);\n\n    var link = createLink(fromId, toId, data);\n\n    links.push(link);\n\n    // TODO: this is not cool. On large graphs potentially would consume more memory.\n    addLinkToNode(fromNode, link);\n    if (fromId !== toId) {\n      // make sure we are not duplicating links for self-loops\n      addLinkToNode(toNode, link);\n    }\n\n    recordLinkChange(link, 'add');\n\n    exitModification();\n\n    return link;\n  }\n\n  function createSingleLink(fromId, toId, data) {\n    var linkId = makeLinkId(fromId, toId);\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function createUniqueLink(fromId, toId, data) {\n    // TODO: Get rid of this method.\n    var linkId = makeLinkId(fromId, toId);\n    var isMultiEdge = multiEdges.hasOwnProperty(linkId);\n    if (isMultiEdge || getLink(fromId, toId)) {\n      if (!isMultiEdge) {\n        multiEdges[linkId] = 0;\n      }\n      var suffix = '@' + (++multiEdges[linkId]);\n      linkId = makeLinkId(fromId + suffix, toId + suffix);\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function getNodeCount() {\n    return nodes.size;\n  }\n\n  function getLinkCount() {\n    return links.length;\n  }\n\n  function getLinks(nodeId) {\n    var node = getNode(nodeId);\n    return node ? node.links : null;\n  }\n\n  function removeLink(link) {\n    if (!link) {\n      return false;\n    }\n    var idx = indexOfElementInArray(link, links);\n    if (idx < 0) {\n      return false;\n    }\n\n    enterModification();\n\n    links.splice(idx, 1);\n\n    var fromNode = getNode(link.fromId);\n    var toNode = getNode(link.toId);\n\n    if (fromNode) {\n      idx = indexOfElementInArray(link, fromNode.links);\n      if (idx >= 0) {\n        fromNode.links.splice(idx, 1);\n      }\n    }\n\n    if (toNode) {\n      idx = indexOfElementInArray(link, toNode.links);\n      if (idx >= 0) {\n        toNode.links.splice(idx, 1);\n      }\n    }\n\n    recordLinkChange(link, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n  function getLink(fromNodeId, toNodeId) {\n    // TODO: Use sorted links to speed this up\n    var node = getNode(fromNodeId),\n      i;\n    if (!node || !node.links) {\n      return null;\n    }\n\n    for (i = 0; i < node.links.length; ++i) {\n      var link = node.links[i];\n      if (link.fromId === fromNodeId && link.toId === toNodeId) {\n        return link;\n      }\n    }\n\n    return null; // no link.\n  }\n\n  function clear() {\n    enterModification();\n    forEachNode(function(node) {\n      removeNode(node.id);\n    });\n    exitModification();\n  }\n\n  function forEachLink(callback) {\n    var i, length;\n    if (typeof callback === 'function') {\n      for (i = 0, length = links.length; i < length; ++i) {\n        callback(links[i]);\n      }\n    }\n  }\n\n  function forEachLinkedNode(nodeId, callback, oriented) {\n    var node = getNode(nodeId);\n\n    if (node && node.links && typeof callback === 'function') {\n      if (oriented) {\n        return forEachOrientedLink(node.links, nodeId, callback);\n      } else {\n        return forEachNonOrientedLink(node.links, nodeId, callback);\n      }\n    }\n  }\n\n  function forEachNonOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      var linkedNodeId = link.fromId === nodeId ? link.toId : link.fromId;\n\n      quitFast = callback(nodes.get(linkedNodeId), link);\n      if (quitFast) {\n        return true; // Client does not need more iterations. Break now.\n      }\n    }\n  }\n\n  function forEachOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    for (var i = 0; i < links.length; ++i) {\n      var link = links[i];\n      if (link.fromId === nodeId) {\n        quitFast = callback(nodes.get(link.toId), link)\n        if (quitFast) {\n          return true; // Client does not need more iterations. Break now.\n        }\n      }\n    }\n  }\n\n  // we will not fire anything until users of this library explicitly call `on()`\n  // method.\n  function noop() {}\n\n  // Enter, Exit modification allows bulk graph updates without firing events.\n  function enterModificationReal() {\n    suspendEvents += 1;\n  }\n\n  function exitModificationReal() {\n    suspendEvents -= 1;\n    if (suspendEvents === 0 && changes.length > 0) {\n      graphPart.fire('changed', changes);\n      changes.length = 0;\n    }\n  }\n\n  function forEachNode(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Function is expected to iterate over graph nodes. You passed ' + callback);\n    }\n\n    var valuesIterator = nodes.values();\n    var nextValue = valuesIterator.next();\n    while (!nextValue.done) {\n      if (callback(nextValue.value)) {\n        return true; // client doesn't want to proceed. Return.\n      }\n      nextValue = valuesIterator.next();\n    }\n  }\n}\n\n// need this for old browsers. Should this be a separate module?\nfunction indexOfElementInArray(element, array) {\n  if (!array) return -1;\n\n  if (array.indexOf) {\n    return array.indexOf(element);\n  }\n\n  var len = array.length,\n    i;\n\n  for (i = 0; i < len; i += 1) {\n    if (array[i] === element) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n/**\n * Internal structure to represent node;\n */\nfunction Node(id, data) {\n  this.id = id;\n  this.links = null;\n  this.data = data;\n}\n\nfunction addLinkToNode(node, link) {\n  if (node.links) {\n    node.links.push(link);\n  } else {\n    node.links = [link];\n  }\n}\n\n/**\n * Internal structure to represent links;\n */\nfunction Link(fromId, toId, data, id) {\n  this.fromId = fromId;\n  this.toId = toId;\n  this.data = data;\n  this.id = id;\n}\n\nfunction makeLinkId(fromId, toId) {\n  return fromId.toString() + '👉 ' + toId.toString();\n}\n","module.exports = function eventify(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"gOfOb\\\":\\\"index.7b6b421a.js\\\",\\\"gwDts\\\":\\\"openpgp.min.173281cd.js\\\"}\"));"],"names":["$b23478aa5f656b71$export$6503ec6e8aabbaf","$b23478aa5f656b71$export$f7ad0328861e2f03","$b23478aa5f656b71$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$gmGs0","parcelRequire","OBFUSCATED_FORMSPREE_ENDPOINT","DATA_URL","cloneTemplate","$lodVU","cloneTemplateFrom","document","customElements","define","$ktVaQ","ClosingDetails","extends","TabPanel","TabGroup","TagList","ModalOverlay","DialogPrompt","Toast","getElementById","addEventListener","_","body","append","feedback","navigator","userAgent","privacy","e","switchToStory","target","files","dragDropOverlay","toast","text","lingerTime","fadeTime","createElement","setAttribute","async","askToConfirm","filename","Promise","res","rej","respond","response","currentTarget","dispatchEvent","closeRequest","template","prompt","querySelector","textContent","substituteText","sidebarMenu","tale","state","routeTree","settings","history","passage","title","curr","close","tagEditor","value","gatherTags","join","psg","get","modifiedTags","split","exportObject","extractMetadata","feedbackForm","buildFeedback","debugInfo","includeDebugInfo","disabled","checked","submit","type","preventDefault","feedbackID","nanoid","data","FormData","subject","entries","map","k","v","feedbackPreview","firstChild","gatherDebugInfo","gatherTagChanges","form","encryptMessage","$parcel$interopDefault","$36WE7","then","encryptedBody","sendFormspree","reset","catch","msg","alert","retrospective","ref","ref1","ref2","innerText","link","ontoggle","open","prepend","getAncestryOf","pastPassage","choice","render","passageTagViewer","tags","tagViewer","inlineTagViewer","passageTags","routeTags","recursive","ref3","_modifiedTags","ref4","arrayUnique","Tree","cata","node","concat","children","fetch","atob","method","headers","Accept","ok","errMsg","data1","json","hasOwn","error","JSON","stringify","deviousVersion","currentPassage","fromEntries","filter","hasOwnProperty","file","storyText","storyDoc","parseDoc","name","hideLanding","loadDocIntoDom","injectDigitizerFeatures","classList","add","doc","head","insertAdjacentHTML","innerHTML","querySelectorAll","forEach","s","eval","Event","store","passages","window","metadataName","some","has","err","metadata","passageGraph","buildPassageGraph","fromGraphBfs","addChild","currentChild","forEachLinkedNode","child","assign","key","set","display","source","callback","CustomEvent","detail","getPrototypeOf","apply","this","parent","annotateLinksWithTheirTarget","addLinkTagLists","stopPropagation","dataTransfer","getLinks","Array","from","matchAll","storeArea","g","$fH3MG","titles","Set","el","getAttribute","addLink","passageBody","linkTargets","links","take","zip","before","include","strip","filterObjectByKey","toObject","$be9fa13a19689010$export$ac4959f4f1338dfc","size","crypto","getRandomValues","Uint8Array","reduce","byte","toString","toUpperCase","$lsFtg","stream","$ee92dd9f2dc38bbd$var$stream","$cgW0f","$ee92dd9f2dc38bbd$var$combine","streams","fn","combine","$ee92dd9f2dc38bbd$var$updateAttribute","srm","attr","obj","pipe","$eEy6s","dropRepeats","on","x","$ee92dd9f2dc38bbd$export$ee7265346f578d9d","HTMLDetailsElement","connectedCallback","_closeIfUnfocused","disconnectedCallback","removeEventListener","constructor","super","contains","elementFromPoint","clientX","clientY","$ee92dd9f2dc38bbd$export$3d96ec278d3efce4","HTMLElement","group","parentElement","$ee92dd9f2dc38bbd$export$85fd4ed3b8ca1010","observedAttributes","attributeChangedCallback","oldVal","newVal","idChanged","default","chain","active","gActive","setClass","attachShadow","mode","shadowRoot","$6woeQ","role","tabs","replaceChildren","tab","class","onclick","defaultTabTitle","part","assignedElements","$ee92dd9f2dc38bbd$export$f9fef0f55402315b","HTMLUListElement","connected","sort","tag","$ee92dd9f2dc38bbd$export$8948f78d83984c69","appendChild","_overlay","remove","bubbles","cancelable","$ee92dd9f2dc38bbd$export$bf1308127b24ea84","onsubmit","$ee92dd9f2dc38bbd$export$8d8dc7d5f743331b","sleep","Number","animationName","$51dff975c0368577$export$2e2bcd8739ae039","defineProperty","enumerable","configurable","writable","$a8h9n","$4bf88878fae0618f$var$htmlProps","nodeValue","className","tabIndex","$4bf88878fae0618f$export$2e2bcd8739ae039","tagName","nodeType","arguments","arg","isArray","createTextNode","j","ks","val","style","cssText","charCodeAt","slice","toLowerCase","tgt","parentNode","$7607f46d1c117952$export$2e2bcd8739ae039","$f926a5a5b972730f$export$2796c4ce44e61efa","elem","cl","bool","$f926a5a5b972730f$export$8048b892d651b310","args","$f926a5a5b972730f$export$e772c8ff12451969","ms","setTimeout","$f926a5a5b972730f$export$a4627e546088548d","fns","acc","$f926a5a5b972730f$export$8901015135f2fb22","rows","c","row","$f926a5a5b972730f$export$b7df5d561049483a","n","iter","$f926a5a5b972730f$export$7bf6fd20e75fd96","arr","$f926a5a5b972730f$export$cf80d7b87eda7a5b","pred","$f926a5a5b972730f$export$485830fe756029f5","$f926a5a5b972730f$var$_key","$f926a5a5b972730f$export$f7404bda8d1e381c","context","replaceAll","match","$f926a5a5b972730f$export$7fbedc92909ed28e","Map","setRoot","attributes","root","undefined","push","deleteNode","delete","morphism","ancestry","unshift","static","tree","f","newLayer","after","stack","at","pop","$jxdtM","$7Vj6Q","getChildren","frontier","addChildOf","currentNode","$f926a5a5b972730f$export$42e04a57be803477","templateId","importNode","content","childNodes","nodeName","trim","$f926a5a5b972730f$export$5db361593220645","docText","DOMParser","parseFromString","$f926a5a5b972730f$export$ac1f1552ea16f7d5","$oNJRK","saveAs","Blob","$f926a5a5b972730f$export$802132930513888b","armoredPublicKey","readKey","encrypt","createMessage","message","encryptionKeys","armoredKey","$502a2e0cb4ba999c$export$2e2bcd8739ae039","ownKeys","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","$9cef4224e4a66c9d$export$2e2bcd8739ae039","getOwnPropertyDescriptors","defineProperties","object","enumerableOnly","symbols","$9cef4224e4a66c9d$var$ownKeys","b","module","exports","a","d","XMLHttpRequest","responseType","onload","onerror","console","send","a1","status","MouseEvent","createEvent","initMouseEvent","self","$parcel$global","global","test","HTMLAnchorElement","prototype","h","URL","webkitURL","download","rel","href","origin","location","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","safari","FileReader","onloadend","result","replace","readAsDataURL","l","m","amd","getBundleURL","resolve","$ex78I","bundle","reject","globalName","Math","random","cleanup","script","charset","$a949af897dfa2ad9$var$cachedBundles","$a949af897dfa2ad9$var$cachedPreloads","$a949af897dfa2ad9$var$cachedPrefetches","$a949af897dfa2ad9$var$getCache","loader","cache","$832d5eb3e17cea9d$export$bdfd709ae4826697","$832d5eb3e17cea9d$var$bundleURL","$832d5eb3e17cea9d$var$getBaseURL","url","matches","$832d5eb3e17cea9d$var$getBundleURL","$8ef3f8dcd7822723$var$trueFn","$8ef3f8dcd7822723$var$inStream","$8ef3f8dcd7822723$var$toUpdate","$8ef3f8dcd7822723$var$order","$8ef3f8dcd7822723$var$orderNextIdx","$8ef3f8dcd7822723$var$flushingUpdateQueue","$8ef3f8dcd7822723$var$flushingStreamValue","$8ef3f8dcd7822723$var$flyd","$8ef3f8dcd7822723$var$combine","deps","depEndStreams","endStream","$8ef3f8dcd7822723$var$createDependentStream","end","depsChanged","fnArgs","listeners","$8ef3f8dcd7822723$var$addListeners","$8ef3f8dcd7822723$var$updateStream","$8ef3f8dcd7822723$var$map","$8ef3f8dcd7822723$var$boundMap","$8ef3f8dcd7822723$var$operator_pipe","$8ef3f8dcd7822723$var$boundChain","$8ef3f8dcd7822723$var$chain","flatEnd","internalEnded","alive","last","flatStream","own","newS","endsOn","$8ef3f8dcd7822723$var$ap","s2","s1","$8ef3f8dcd7822723$var$boundAp","$8ef3f8dcd7822723$var$fantasy_land_ap","$8ef3f8dcd7822723$var$streamToString","$8ef3f8dcd7822723$var$createStream","$8ef3f8dcd7822723$var$updateStreamValue","hasVal","updaters","queued","ap","of","toJSON","depsMet","shouldUpdate","every","$8ef3f8dcd7822723$var$initialDependenciesMet","$8ef3f8dcd7822723$var$dependenciesAreMet","returnVal","$8ef3f8dcd7822723$var$flushUpdate","$8ef3f8dcd7822723$var$listenersNeedUpdating","listener","$8ef3f8dcd7822723$var$updateLaterUsing","$8ef3f8dcd7822723$var$findDeps","updater","shift","nextUpdateFn","o","list","$8ef3f8dcd7822723$var$endStream","$8ef3f8dcd7822723$var$updateListeners","lists","$8ef3f8dcd7822723$var$markListeners","$8ef3f8dcd7822723$var$removeListener","idx","indexOf","$8ef3f8dcd7822723$var$detachDeps","$8ef3f8dcd7822723$var$StreamTransformer","initialValue","$1nYwi","isStream","call","immediate","endS","scan","ns","merge","changed","transduce","xform","curryN","fromPromise","p","flattenPromise","$6eJYh","$1026e2650a4010d0$var$curryN","$1dUzI","$j78DI","$fOv2B","a0","a2","a3","a4","a5","a6","a7","a8","a9","$keqXc","f1","f2","_b","_a","$b8339a99f14f761a$var$_curryN","received","combined","argsIdx","left","combinedIdx","$aaaf41478e6408ed$export$f42b5f849eadee29","$aaaf41478e6408ed$var$dropRepeatsWith","eq","prev","$aaaf41478e6408ed$var$strictEq","options","multigraph","uniqueLinkId","nodes","multiEdges","suspendEvents","createLink","fromId","toId","linkId","$b6cdce9dcc025a1f$var$makeLinkId","isMultiEdge","getLink","suffix","$b6cdce9dcc025a1f$var$Link","changes","recordLinkChange","noop","recordNodeChange","enterModification","exitModification","graphPart","addNode","fromNode","getNode","toNode","$b6cdce9dcc025a1f$var$addLinkToNode","removeLink","removeNode","getNodeCount","getLinkCount","getLinksCount","getNodesCount","nodeId","forEachNode","oriented","forEachOrientedLink","linkedNodeId","forEachNonOrientedLink","forEachLink","beginUpdate","endUpdate","clear","hasLink","hasNode","$bS1IX","realOn","enterModificationReal","exitModificationReal","recordLinkChangeReal","recordNodeChangeReal","monitorSubscribers","changeType","$b6cdce9dcc025a1f$var$Node","prevLinks","$b6cdce9dcc025a1f$var$indexOfElementInArray","splice","fromNodeId","toNodeId","fire","valuesIterator","values","nextValue","next","done","element","array","len","reservedWords","$023aefcb5e397a7e$var$validateSubject","eventsStorage","registeredEvents","create","eventName","ctx","handlers","off","callbacks","fireArguments","callbackInfo","$023aefcb5e397a7e$var$createEventsStorage","register","parse"],"version":3,"file":"index.7b6b421a.js.map"}